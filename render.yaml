# render.yaml
# Render.com 자동 배포 설정 파일
# 이 파일을 프로젝트 루트에 저장하세요

services:
  # 웹 서비스 정의
  - type: web
    name: youtube-translator-kr  # 서비스 이름 (URL에 포함됨)
    runtime: python
    region: singapore  # 한국에서 가장 가까운 리전
    plan: free  # 무료 플랜 (월 750시간)
    
    # 빌드 설정
    buildCommand: |
      # Python 패키지 설치
      pip install --upgrade pip
      pip install -r requirements.txt
    
    # 서버 시작 명령어
    startCommand: |
      # Render가 자동으로 PORT 환경변수 제공
      uvicorn app.main:app --host 0.0.0.0 --port $PORT
    
    # 환경 변수 설정
    envVars:
      # Gemini API 키 (Render 대시보드에서 설정)
      - key: GEMINI_API_KEY
        sync: false  # 보안을 위해 대시보드에서 수동 입력
        
      # Python 버전 지정
      - key: PYTHON_VERSION
        value: 3.11.0
        
      # 타임존 설정 (한국 시간)
      - key: TZ
        value: Asia/Seoul
        
      # 로그 레벨
      - key: LOG_LEVEL
        value: info
        
      # CORS 설정 (배포 후 URL로 변경 필요)
      - key: ALLOWED_ORIGINS
        value: "*"  # 초기에는 모든 도메인 허용
    
    # 헬스체크 설정
    healthCheckPath: /health
    
    # 자동 배포 설정
    autoDeploy: true  # main 브랜치 푸시 시 자동 배포
